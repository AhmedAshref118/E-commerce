<section class="bg-main-light shadow p-2 my-2  pt-4 rounded">


    <h1 class="h2 text-main pt-3">Rigester Now :</h1>



    <form [formGroup]="registerForm" (ngSubmit)="registerSubmit()">
        <div class="my-3">
            <label for="name">name</label>
            <input  [ngClass]="{
                'is-valid': !registerForm.get('name')?.errors &&  registerForm.get('name')?.touched ,
                'is-invalid': registerForm.get('name')?.errors && registerForm.get('name')?.touched
            }"  id="name" type="text" class="form-control" formControlName="name">

            @if (registerForm.get('name')?.errors && registerForm.get('name')?.touched) 
            {
            <div class="alert alert-danger w-50">

                @if (registerForm.get('name')?.getError('required')) {
                    <p class="m-0">Name requerd</p>
                }
                @else if (registerForm.get('name')?.getError('minlength')) 
                {
                    <p class="m-0">Name Should be more than or equal  3 chars</p>
                }
                
                @else if (registerForm.get('name')?.getError('maxlength'))
                        { 
                            <p class="m-0">Name Should be less than or equal  20 chars</p>
                        }
                
            </div>
            }
        </div>


        <div class="my-3">
            <label for="email">email</label>
            <input [ngClass]="{
                'is-valid': !registerForm.get('email')?.errors &&  registerForm.get('email')?.touched ,
                'is-invalid': registerForm.get('email')?.errors && registerForm.get('email')?.touched
            }"
            
                id="email" type="email" class="form-control" formControlName="email" >

            @if (registerForm.get('email')?.errors && registerForm.get('email')?.touched)
            {
                <div class="alert alert-danger w-50">
                    @if (registerForm.get('email')?.getError('required')) 
                    {
                        <p>Email required</p>
                    }
                    @else if (registerForm.get('email')?.getError('email')) 
                    {
                        <p>Enter Valid Email </p> 
                    }
                </div>
            }
        </div>


        <div class="my-3">
            <label for="password">password</label>
            <input [ngClass]="{
                'is-valid': !registerForm.get('password')?.errors &&  registerForm.get('password')?.touched ,
                'is-invalid': registerForm.get('password')?.errors && registerForm.get('password')?.touched
            }"
            
            id="password" type="password" class="form-control" formControlName="password">

            @if (registerForm.get('password')?.errors && registerForm.get('password')?.touched)
            {
                <div class="alert alert-danger w-50">
                    @if (registerForm.get('password')?.getError('required')) 
                    {
                        <p>password required</p>
                    }
                    @else if (registerForm.get('password')?.getError('pattern')) 
                    {
                        <p>Enter Valid password </p> 
                    }
                </div>
            }
        </div>


        <div class="my-3">
            <label for="rePassword">rePessowrd</label>
            <input id="rePassword" type="password" class="form-control" formControlName="rePassword">
            
        
            @if (registerForm.getError('mismatch') && registerForm.get('rePassword')?.touched)
            {
                <p class="alert alert-danger w-50 m-0">Password confirmation is incorrect</p>
            }
            @if (registerForm.get('rePassword')?.dirty && !registerForm.get('rePassword')?.hasError('mismatch') && registerForm.get('rePassword')?.value === registerForm.get('password')?.value)
                {
                    <p  class="alert alert-success w-50 m-0">
                        Passwords match

                    </p>
                }

            
        </div>
        


        <div class="my-3">
            <label for="phone">phone</label>
            <input [ngClass]="{
                'is-valid': !registerForm.get('phone')?.errors &&  registerForm.get('phone')?.touched ,
                'is-invalid': registerForm.get('phone')?.errors && registerForm.get('phone')?.touched
            }"
            
            
            id="phone" type="tel" class="form-control" formControlName="phone">


            @if (registerForm.get('phone')?.errors && registerForm.get('phone')?.touched)
            {
                <div class="alert alert-danger w-50">
                    @if (registerForm.get('phone')?.getError('required')) 
                    {
                        <p>phone required</p>
                    }
                    @else if (registerForm.get('phone')?.getError('pattern')) 
                    {
                        <p>Enter Valid phone </p> 
                    }
                </div>
            }
        </div>


        <button   [disabled]="registerForm.invalid || isLoding"  type="submit"  class="btn-main ms-auto d-block">Register 
            @if (isLoding)
             {
                <span><i class="fas fa-spin-pulse fa-spinner "></i></span>
             }
        </button>
@if (msgError) 
{
    
    <p class="alert alert-danger w-50 m-0">
        {{msgError}}
    </p>
}

    </form>
</section>
